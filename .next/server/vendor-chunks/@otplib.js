"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@otplib";
exports.ids = ["vendor-chunks/@otplib"];
exports.modules = {

/***/ "(rsc)/./node_modules/@otplib/core/index.js":
/*!********************************************!*\
  !*** ./node_modules/@otplib/core/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/**\n * @otplib/core\n *\n * @author Gerald Yeo <contact@fusedthought.com>\n * @version: 12.0.1\n * @license: MIT\n **/\n\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nfunction objectValues(value) {\n  return Object.keys(value).map(key => value[key]);\n}\n(function (HashAlgorithms) {\n  HashAlgorithms[\"SHA1\"] = \"sha1\";\n  HashAlgorithms[\"SHA256\"] = \"sha256\";\n  HashAlgorithms[\"SHA512\"] = \"sha512\";\n})(exports.HashAlgorithms || (exports.HashAlgorithms = {}));\nconst HASH_ALGORITHMS = objectValues(exports.HashAlgorithms);\n(function (KeyEncodings) {\n  KeyEncodings[\"ASCII\"] = \"ascii\";\n  KeyEncodings[\"BASE64\"] = \"base64\";\n  KeyEncodings[\"HEX\"] = \"hex\";\n  KeyEncodings[\"LATIN1\"] = \"latin1\";\n  KeyEncodings[\"UTF8\"] = \"utf8\";\n})(exports.KeyEncodings || (exports.KeyEncodings = {}));\nconst KEY_ENCODINGS = objectValues(exports.KeyEncodings);\n(function (Strategy) {\n  Strategy[\"HOTP\"] = \"hotp\";\n  Strategy[\"TOTP\"] = \"totp\";\n})(exports.Strategy || (exports.Strategy = {}));\nconst STRATEGY = objectValues(exports.Strategy);\nconst createDigestPlaceholder = () => {\n  throw new Error('Please provide an options.createDigest implementation.');\n};\nfunction isTokenValid(value) {\n  return /^(\\d+)$/.test(value);\n}\nfunction padStart(value, maxLength, fillString) {\n  if (value.length >= maxLength) {\n    return value;\n  }\n  const padding = Array(maxLength + 1).join(fillString);\n  return `${padding}${value}`.slice(-1 * maxLength);\n}\nfunction keyuri(options) {\n  const tmpl = `otpauth://${options.type}/{labelPrefix}:{accountName}?secret={secret}{query}`;\n  const params = [];\n  if (STRATEGY.indexOf(options.type) < 0) {\n    throw new Error(`Expecting options.type to be one of ${STRATEGY.join(', ')}. Received ${options.type}.`);\n  }\n  if (options.type === 'hotp') {\n    if (options.counter == null || typeof options.counter !== 'number') {\n      throw new Error('Expecting options.counter to be a number when options.type is \"hotp\".');\n    }\n    params.push(`&counter=${options.counter}`);\n  }\n  if (options.type === 'totp' && options.step) {\n    params.push(`&period=${options.step}`);\n  }\n  if (options.digits) {\n    params.push(`&digits=${options.digits}`);\n  }\n  if (options.algorithm) {\n    params.push(`&algorithm=${options.algorithm.toUpperCase()}`);\n  }\n  if (options.issuer) {\n    params.push(`&issuer=${encodeURIComponent(options.issuer)}`);\n  }\n  return tmpl.replace('{labelPrefix}', encodeURIComponent(options.issuer || options.accountName)).replace('{accountName}', encodeURIComponent(options.accountName)).replace('{secret}', options.secret).replace('{query}', params.join(''));\n}\nclass OTP {\n  constructor(defaultOptions = {}) {\n    this._defaultOptions = Object.freeze({ ...defaultOptions\n    });\n    this._options = Object.freeze({});\n  }\n  create(defaultOptions = {}) {\n    return new OTP(defaultOptions);\n  }\n  clone(defaultOptions = {}) {\n    const instance = this.create({ ...this._defaultOptions,\n      ...defaultOptions\n    });\n    instance.options = this._options;\n    return instance;\n  }\n  get options() {\n    return Object.freeze({ ...this._defaultOptions,\n      ...this._options\n    });\n  }\n  set options(options) {\n    this._options = Object.freeze({ ...this._options,\n      ...options\n    });\n  }\n  allOptions() {\n    return this.options;\n  }\n  resetOptions() {\n    this._options = Object.freeze({});\n  }\n}\n\nfunction hotpOptionsValidator(options) {\n  if (typeof options.createDigest !== 'function') {\n    throw new Error('Expecting options.createDigest to be a function.');\n  }\n  if (typeof options.createHmacKey !== 'function') {\n    throw new Error('Expecting options.createHmacKey to be a function.');\n  }\n  if (typeof options.digits !== 'number') {\n    throw new Error('Expecting options.digits to be a number.');\n  }\n  if (!options.algorithm || HASH_ALGORITHMS.indexOf(options.algorithm) < 0) {\n    throw new Error(`Expecting options.algorithm to be one of ${HASH_ALGORITHMS.join(', ')}. Received ${options.algorithm}.`);\n  }\n  if (!options.encoding || KEY_ENCODINGS.indexOf(options.encoding) < 0) {\n    throw new Error(`Expecting options.encoding to be one of ${KEY_ENCODINGS.join(', ')}. Received ${options.encoding}.`);\n  }\n}\nconst hotpCreateHmacKey = (algorithm, secret, encoding) => {\n  return Buffer.from(secret, encoding).toString('hex');\n};\nfunction hotpDefaultOptions() {\n  const options = {\n    algorithm: exports.HashAlgorithms.SHA1,\n    createHmacKey: hotpCreateHmacKey,\n    createDigest: createDigestPlaceholder,\n    digits: 6,\n    encoding: exports.KeyEncodings.ASCII\n  };\n  return options;\n}\nfunction hotpOptions(opt) {\n  const options = { ...hotpDefaultOptions(),\n    ...opt\n  };\n  hotpOptionsValidator(options);\n  return Object.freeze(options);\n}\nfunction hotpCounter(counter) {\n  const hexCounter = counter.toString(16);\n  return padStart(hexCounter, 16, '0');\n}\nfunction hotpDigestToToken(hexDigest, digits) {\n  const digest = Buffer.from(hexDigest, 'hex');\n  const offset = digest[digest.length - 1] & 0xf;\n  const binary = (digest[offset] & 0x7f) << 24 | (digest[offset + 1] & 0xff) << 16 | (digest[offset + 2] & 0xff) << 8 | digest[offset + 3] & 0xff;\n  const token = binary % Math.pow(10, digits);\n  return padStart(String(token), digits, '0');\n}\nfunction hotpDigest(secret, counter, options) {\n  const hexCounter = hotpCounter(counter);\n  const hmacKey = options.createHmacKey(options.algorithm, secret, options.encoding);\n  return options.createDigest(options.algorithm, hmacKey, hexCounter);\n}\nfunction hotpToken(secret, counter, options) {\n  const hexDigest = options.digest || hotpDigest(secret, counter, options);\n  return hotpDigestToToken(hexDigest, options.digits);\n}\nfunction hotpCheck(token, secret, counter, options) {\n  if (!isTokenValid(token)) {\n    return false;\n  }\n  const systemToken = hotpToken(secret, counter, options);\n  return token === systemToken;\n}\nfunction hotpKeyuri(accountName, issuer, secret, counter, options) {\n  return keyuri({\n    algorithm: options.algorithm,\n    digits: options.digits,\n    type: exports.Strategy.HOTP,\n    accountName,\n    counter,\n    issuer,\n    secret\n  });\n}\nclass HOTP extends OTP {\n  create(defaultOptions = {}) {\n    return new HOTP(defaultOptions);\n  }\n  allOptions() {\n    return hotpOptions(this.options);\n  }\n  generate(secret, counter) {\n    return hotpToken(secret, counter, this.allOptions());\n  }\n  check(token, secret, counter) {\n    return hotpCheck(token, secret, counter, this.allOptions());\n  }\n  verify(opts) {\n    if (typeof opts !== 'object') {\n      throw new Error('Expecting argument 0 of verify to be an object');\n    }\n    return this.check(opts.token, opts.secret, opts.counter);\n  }\n  keyuri(accountName, issuer, secret, counter) {\n    return hotpKeyuri(accountName, issuer, secret, counter, this.allOptions());\n  }\n}\n\nfunction parseWindowBounds(win) {\n  if (typeof win === 'number') {\n    return [Math.abs(win), Math.abs(win)];\n  }\n  if (Array.isArray(win)) {\n    const [past, future] = win;\n    if (typeof past === 'number' && typeof future === 'number') {\n      return [Math.abs(past), Math.abs(future)];\n    }\n  }\n  throw new Error('Expecting options.window to be an number or [number, number].');\n}\nfunction totpOptionsValidator(options) {\n  hotpOptionsValidator(options);\n  parseWindowBounds(options.window);\n  if (typeof options.epoch !== 'number') {\n    throw new Error('Expecting options.epoch to be a number.');\n  }\n  if (typeof options.step !== 'number') {\n    throw new Error('Expecting options.step to be a number.');\n  }\n}\nconst totpPadSecret = (secret, encoding, minLength) => {\n  const currentLength = secret.length;\n  const hexSecret = Buffer.from(secret, encoding).toString('hex');\n  if (currentLength < minLength) {\n    const newSecret = new Array(minLength - currentLength + 1).join(hexSecret);\n    return Buffer.from(newSecret, 'hex').slice(0, minLength).toString('hex');\n  }\n  return hexSecret;\n};\nconst totpCreateHmacKey = (algorithm, secret, encoding) => {\n  switch (algorithm) {\n    case exports.HashAlgorithms.SHA1:\n      return totpPadSecret(secret, encoding, 20);\n    case exports.HashAlgorithms.SHA256:\n      return totpPadSecret(secret, encoding, 32);\n    case exports.HashAlgorithms.SHA512:\n      return totpPadSecret(secret, encoding, 64);\n    default:\n      throw new Error(`Expecting algorithm to be one of ${HASH_ALGORITHMS.join(', ')}. Received ${algorithm}.`);\n  }\n};\nfunction totpDefaultOptions() {\n  const options = {\n    algorithm: exports.HashAlgorithms.SHA1,\n    createDigest: createDigestPlaceholder,\n    createHmacKey: totpCreateHmacKey,\n    digits: 6,\n    encoding: exports.KeyEncodings.ASCII,\n    epoch: Date.now(),\n    step: 30,\n    window: 0\n  };\n  return options;\n}\nfunction totpOptions(opt) {\n  const options = { ...totpDefaultOptions(),\n    ...opt\n  };\n  totpOptionsValidator(options);\n  return Object.freeze(options);\n}\nfunction totpCounter(epoch, step) {\n  return Math.floor(epoch / step / 1000);\n}\nfunction totpToken(secret, options) {\n  const counter = totpCounter(options.epoch, options.step);\n  return hotpToken(secret, counter, options);\n}\nfunction totpEpochsInWindow(epoch, direction, deltaPerEpoch, numOfEpoches) {\n  const result = [];\n  if (numOfEpoches === 0) {\n    return result;\n  }\n  for (let i = 1; i <= numOfEpoches; i++) {\n    const delta = direction * i * deltaPerEpoch;\n    result.push(epoch + delta);\n  }\n  return result;\n}\nfunction totpEpochAvailable(epoch, step, win) {\n  const bounds = parseWindowBounds(win);\n  const delta = step * 1000;\n  return {\n    current: epoch,\n    past: totpEpochsInWindow(epoch, -1, delta, bounds[0]),\n    future: totpEpochsInWindow(epoch, 1, delta, bounds[1])\n  };\n}\nfunction totpCheck(token, secret, options) {\n  if (!isTokenValid(token)) {\n    return false;\n  }\n  const systemToken = totpToken(secret, options);\n  return token === systemToken;\n}\nfunction totpCheckByEpoch(epochs, token, secret, options) {\n  let position = null;\n  epochs.some((epoch, idx) => {\n    if (totpCheck(token, secret, { ...options,\n      epoch\n    })) {\n      position = idx + 1;\n      return true;\n    }\n    return false;\n  });\n  return position;\n}\nfunction totpCheckWithWindow(token, secret, options) {\n  if (totpCheck(token, secret, options)) {\n    return 0;\n  }\n  const epochs = totpEpochAvailable(options.epoch, options.step, options.window);\n  const backward = totpCheckByEpoch(epochs.past, token, secret, options);\n  if (backward !== null) {\n    return backward * -1;\n  }\n  return totpCheckByEpoch(epochs.future, token, secret, options);\n}\nfunction totpTimeUsed(epoch, step) {\n  return Math.floor(epoch / 1000) % step;\n}\nfunction totpTimeRemaining(epoch, step) {\n  return step - totpTimeUsed(epoch, step);\n}\nfunction totpKeyuri(accountName, issuer, secret, options) {\n  return keyuri({\n    algorithm: options.algorithm,\n    digits: options.digits,\n    step: options.step,\n    type: exports.Strategy.TOTP,\n    accountName,\n    issuer,\n    secret\n  });\n}\nclass TOTP extends HOTP {\n  create(defaultOptions = {}) {\n    return new TOTP(defaultOptions);\n  }\n  allOptions() {\n    return totpOptions(this.options);\n  }\n  generate(secret) {\n    return totpToken(secret, this.allOptions());\n  }\n  checkDelta(token, secret) {\n    return totpCheckWithWindow(token, secret, this.allOptions());\n  }\n  check(token, secret) {\n    const delta = this.checkDelta(token, secret);\n    return typeof delta === 'number';\n  }\n  verify(opts) {\n    if (typeof opts !== 'object') {\n      throw new Error('Expecting argument 0 of verify to be an object');\n    }\n    return this.check(opts.token, opts.secret);\n  }\n  timeRemaining() {\n    const options = this.allOptions();\n    return totpTimeRemaining(options.epoch, options.step);\n  }\n  timeUsed() {\n    const options = this.allOptions();\n    return totpTimeUsed(options.epoch, options.step);\n  }\n  keyuri(accountName, issuer, secret) {\n    return totpKeyuri(accountName, issuer, secret, this.allOptions());\n  }\n}\n\nfunction authenticatorOptionValidator(options) {\n  totpOptionsValidator(options);\n  if (typeof options.keyDecoder !== 'function') {\n    throw new Error('Expecting options.keyDecoder to be a function.');\n  }\n  if (options.keyEncoder && typeof options.keyEncoder !== 'function') {\n    throw new Error('Expecting options.keyEncoder to be a function.');\n  }\n}\nfunction authenticatorDefaultOptions() {\n  const options = {\n    algorithm: exports.HashAlgorithms.SHA1,\n    createDigest: createDigestPlaceholder,\n    createHmacKey: totpCreateHmacKey,\n    digits: 6,\n    encoding: exports.KeyEncodings.HEX,\n    epoch: Date.now(),\n    step: 30,\n    window: 0\n  };\n  return options;\n}\nfunction authenticatorOptions(opt) {\n  const options = { ...authenticatorDefaultOptions(),\n    ...opt\n  };\n  authenticatorOptionValidator(options);\n  return Object.freeze(options);\n}\nfunction authenticatorEncoder(secret, options) {\n  return options.keyEncoder(secret, options.encoding);\n}\nfunction authenticatorDecoder(secret, options) {\n  return options.keyDecoder(secret, options.encoding);\n}\nfunction authenticatorGenerateSecret(numberOfBytes, options) {\n  const key = options.createRandomBytes(numberOfBytes, options.encoding);\n  return authenticatorEncoder(key, options);\n}\nfunction authenticatorToken(secret, options) {\n  return totpToken(authenticatorDecoder(secret, options), options);\n}\nfunction authenticatorCheckWithWindow(token, secret, options) {\n  return totpCheckWithWindow(token, authenticatorDecoder(secret, options), options);\n}\nclass Authenticator extends TOTP {\n  create(defaultOptions = {}) {\n    return new Authenticator(defaultOptions);\n  }\n  allOptions() {\n    return authenticatorOptions(this.options);\n  }\n  generate(secret) {\n    return authenticatorToken(secret, this.allOptions());\n  }\n  checkDelta(token, secret) {\n    return authenticatorCheckWithWindow(token, secret, this.allOptions());\n  }\n  encode(secret) {\n    return authenticatorEncoder(secret, this.allOptions());\n  }\n  decode(secret) {\n    return authenticatorDecoder(secret, this.allOptions());\n  }\n  generateSecret(numberOfBytes = 10) {\n    return authenticatorGenerateSecret(numberOfBytes, this.allOptions());\n  }\n}\n\nexports.Authenticator = Authenticator;\nexports.HASH_ALGORITHMS = HASH_ALGORITHMS;\nexports.HOTP = HOTP;\nexports.KEY_ENCODINGS = KEY_ENCODINGS;\nexports.OTP = OTP;\nexports.STRATEGY = STRATEGY;\nexports.TOTP = TOTP;\nexports.authenticatorCheckWithWindow = authenticatorCheckWithWindow;\nexports.authenticatorDecoder = authenticatorDecoder;\nexports.authenticatorDefaultOptions = authenticatorDefaultOptions;\nexports.authenticatorEncoder = authenticatorEncoder;\nexports.authenticatorGenerateSecret = authenticatorGenerateSecret;\nexports.authenticatorOptionValidator = authenticatorOptionValidator;\nexports.authenticatorOptions = authenticatorOptions;\nexports.authenticatorToken = authenticatorToken;\nexports.createDigestPlaceholder = createDigestPlaceholder;\nexports.hotpCheck = hotpCheck;\nexports.hotpCounter = hotpCounter;\nexports.hotpCreateHmacKey = hotpCreateHmacKey;\nexports.hotpDefaultOptions = hotpDefaultOptions;\nexports.hotpDigestToToken = hotpDigestToToken;\nexports.hotpKeyuri = hotpKeyuri;\nexports.hotpOptions = hotpOptions;\nexports.hotpOptionsValidator = hotpOptionsValidator;\nexports.hotpToken = hotpToken;\nexports.isTokenValid = isTokenValid;\nexports.keyuri = keyuri;\nexports.objectValues = objectValues;\nexports.padStart = padStart;\nexports.totpCheck = totpCheck;\nexports.totpCheckByEpoch = totpCheckByEpoch;\nexports.totpCheckWithWindow = totpCheckWithWindow;\nexports.totpCounter = totpCounter;\nexports.totpCreateHmacKey = totpCreateHmacKey;\nexports.totpDefaultOptions = totpDefaultOptions;\nexports.totpEpochAvailable = totpEpochAvailable;\nexports.totpKeyuri = totpKeyuri;\nexports.totpOptions = totpOptions;\nexports.totpOptionsValidator = totpOptionsValidator;\nexports.totpPadSecret = totpPadSecret;\nexports.totpTimeRemaining = totpTimeRemaining;\nexports.totpTimeUsed = totpTimeUsed;\nexports.totpToken = totpToken;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQG90cGxpYi9jb3JlL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNkJBQTZCLHNCQUFzQixLQUFLO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywyQkFBMkIsb0JBQW9CLEtBQUs7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHVCQUF1QixnQkFBZ0IsS0FBSztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsRUFBRSxNQUFNO0FBQzVCO0FBQ0E7QUFDQSw0QkFBNEIsYUFBYSxFQUFFLFlBQVksRUFBRSxZQUFZLFNBQVMsUUFBUSxNQUFNO0FBQzVGO0FBQ0E7QUFDQSwyREFBMkQsb0JBQW9CLGFBQWEsYUFBYTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0EsMkJBQTJCLGFBQWE7QUFDeEM7QUFDQTtBQUNBLDJCQUEyQixlQUFlO0FBQzFDO0FBQ0E7QUFDQSw4QkFBOEIsZ0NBQWdDO0FBQzlEO0FBQ0E7QUFDQSwyQkFBMkIsbUNBQW1DO0FBQzlEO0FBQ0Esd0JBQXdCLFlBQVksd0VBQXdFLFlBQVksc0RBQXNELE9BQU8sNkJBQTZCLE1BQU07QUFDeE47QUFDQTtBQUNBLGlDQUFpQztBQUNqQywyQ0FBMkM7QUFDM0MsS0FBSztBQUNMLG9DQUFvQztBQUNwQztBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCLG1DQUFtQztBQUNuQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLDJCQUEyQixhQUFhLGtCQUFrQjtBQUMxSDtBQUNBO0FBQ0EsK0RBQStELHlCQUF5QixhQUFhLGlCQUFpQjtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELDJCQUEyQixhQUFhLFVBQVU7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQjtBQUNyQix1QkFBdUI7QUFDdkIsWUFBWTtBQUNaLHFCQUFxQjtBQUNyQixXQUFXO0FBQ1gsZ0JBQWdCO0FBQ2hCLFlBQVk7QUFDWixvQ0FBb0M7QUFDcEMsNEJBQTRCO0FBQzVCLG1DQUFtQztBQUNuQyw0QkFBNEI7QUFDNUIsbUNBQW1DO0FBQ25DLG9DQUFvQztBQUNwQyw0QkFBNEI7QUFDNUIsMEJBQTBCO0FBQzFCLCtCQUErQjtBQUMvQixpQkFBaUI7QUFDakIsbUJBQW1CO0FBQ25CLHlCQUF5QjtBQUN6QiwwQkFBMEI7QUFDMUIseUJBQXlCO0FBQ3pCLGtCQUFrQjtBQUNsQixtQkFBbUI7QUFDbkIsNEJBQTRCO0FBQzVCLGlCQUFpQjtBQUNqQixvQkFBb0I7QUFDcEIsY0FBYztBQUNkLG9CQUFvQjtBQUNwQixnQkFBZ0I7QUFDaEIsaUJBQWlCO0FBQ2pCLHdCQUF3QjtBQUN4QiwyQkFBMkI7QUFDM0IsbUJBQW1CO0FBQ25CLHlCQUF5QjtBQUN6QiwwQkFBMEI7QUFDMUIsMEJBQTBCO0FBQzFCLGtCQUFrQjtBQUNsQixtQkFBbUI7QUFDbkIsNEJBQTRCO0FBQzVCLHFCQUFxQjtBQUNyQix5QkFBeUI7QUFDekIsb0JBQW9CO0FBQ3BCLGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FuZ2VsYnJva2luZy1saXZlLWRhdGEtdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BvdHBsaWIvY29yZS9pbmRleC5qcz9hMTZhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG90cGxpYi9jb3JlXG4gKlxuICogQGF1dGhvciBHZXJhbGQgWWVvIDxjb250YWN0QGZ1c2VkdGhvdWdodC5jb20+XG4gKiBAdmVyc2lvbjogMTIuMC4xXG4gKiBAbGljZW5zZTogTUlUXG4gKiovXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbmZ1bmN0aW9uIG9iamVjdFZhbHVlcyh2YWx1ZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXModmFsdWUpLm1hcChrZXkgPT4gdmFsdWVba2V5XSk7XG59XG4oZnVuY3Rpb24gKEhhc2hBbGdvcml0aG1zKSB7XG4gIEhhc2hBbGdvcml0aG1zW1wiU0hBMVwiXSA9IFwic2hhMVwiO1xuICBIYXNoQWxnb3JpdGhtc1tcIlNIQTI1NlwiXSA9IFwic2hhMjU2XCI7XG4gIEhhc2hBbGdvcml0aG1zW1wiU0hBNTEyXCJdID0gXCJzaGE1MTJcIjtcbn0pKGV4cG9ydHMuSGFzaEFsZ29yaXRobXMgfHwgKGV4cG9ydHMuSGFzaEFsZ29yaXRobXMgPSB7fSkpO1xuY29uc3QgSEFTSF9BTEdPUklUSE1TID0gb2JqZWN0VmFsdWVzKGV4cG9ydHMuSGFzaEFsZ29yaXRobXMpO1xuKGZ1bmN0aW9uIChLZXlFbmNvZGluZ3MpIHtcbiAgS2V5RW5jb2RpbmdzW1wiQVNDSUlcIl0gPSBcImFzY2lpXCI7XG4gIEtleUVuY29kaW5nc1tcIkJBU0U2NFwiXSA9IFwiYmFzZTY0XCI7XG4gIEtleUVuY29kaW5nc1tcIkhFWFwiXSA9IFwiaGV4XCI7XG4gIEtleUVuY29kaW5nc1tcIkxBVElOMVwiXSA9IFwibGF0aW4xXCI7XG4gIEtleUVuY29kaW5nc1tcIlVURjhcIl0gPSBcInV0ZjhcIjtcbn0pKGV4cG9ydHMuS2V5RW5jb2RpbmdzIHx8IChleHBvcnRzLktleUVuY29kaW5ncyA9IHt9KSk7XG5jb25zdCBLRVlfRU5DT0RJTkdTID0gb2JqZWN0VmFsdWVzKGV4cG9ydHMuS2V5RW5jb2RpbmdzKTtcbihmdW5jdGlvbiAoU3RyYXRlZ3kpIHtcbiAgU3RyYXRlZ3lbXCJIT1RQXCJdID0gXCJob3RwXCI7XG4gIFN0cmF0ZWd5W1wiVE9UUFwiXSA9IFwidG90cFwiO1xufSkoZXhwb3J0cy5TdHJhdGVneSB8fCAoZXhwb3J0cy5TdHJhdGVneSA9IHt9KSk7XG5jb25zdCBTVFJBVEVHWSA9IG9iamVjdFZhbHVlcyhleHBvcnRzLlN0cmF0ZWd5KTtcbmNvbnN0IGNyZWF0ZURpZ2VzdFBsYWNlaG9sZGVyID0gKCkgPT4ge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBwcm92aWRlIGFuIG9wdGlvbnMuY3JlYXRlRGlnZXN0IGltcGxlbWVudGF0aW9uLicpO1xufTtcbmZ1bmN0aW9uIGlzVG9rZW5WYWxpZCh2YWx1ZSkge1xuICByZXR1cm4gL14oXFxkKykkLy50ZXN0KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHBhZFN0YXJ0KHZhbHVlLCBtYXhMZW5ndGgsIGZpbGxTdHJpbmcpIHtcbiAgaWYgKHZhbHVlLmxlbmd0aCA+PSBtYXhMZW5ndGgpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgY29uc3QgcGFkZGluZyA9IEFycmF5KG1heExlbmd0aCArIDEpLmpvaW4oZmlsbFN0cmluZyk7XG4gIHJldHVybiBgJHtwYWRkaW5nfSR7dmFsdWV9YC5zbGljZSgtMSAqIG1heExlbmd0aCk7XG59XG5mdW5jdGlvbiBrZXl1cmkob3B0aW9ucykge1xuICBjb25zdCB0bXBsID0gYG90cGF1dGg6Ly8ke29wdGlvbnMudHlwZX0ve2xhYmVsUHJlZml4fTp7YWNjb3VudE5hbWV9P3NlY3JldD17c2VjcmV0fXtxdWVyeX1gO1xuICBjb25zdCBwYXJhbXMgPSBbXTtcbiAgaWYgKFNUUkFURUdZLmluZGV4T2Yob3B0aW9ucy50eXBlKSA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGluZyBvcHRpb25zLnR5cGUgdG8gYmUgb25lIG9mICR7U1RSQVRFR1kuam9pbignLCAnKX0uIFJlY2VpdmVkICR7b3B0aW9ucy50eXBlfS5gKTtcbiAgfVxuICBpZiAob3B0aW9ucy50eXBlID09PSAnaG90cCcpIHtcbiAgICBpZiAob3B0aW9ucy5jb3VudGVyID09IG51bGwgfHwgdHlwZW9mIG9wdGlvbnMuY291bnRlciAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0aW5nIG9wdGlvbnMuY291bnRlciB0byBiZSBhIG51bWJlciB3aGVuIG9wdGlvbnMudHlwZSBpcyBcImhvdHBcIi4nKTtcbiAgICB9XG4gICAgcGFyYW1zLnB1c2goYCZjb3VudGVyPSR7b3B0aW9ucy5jb3VudGVyfWApO1xuICB9XG4gIGlmIChvcHRpb25zLnR5cGUgPT09ICd0b3RwJyAmJiBvcHRpb25zLnN0ZXApIHtcbiAgICBwYXJhbXMucHVzaChgJnBlcmlvZD0ke29wdGlvbnMuc3RlcH1gKTtcbiAgfVxuICBpZiAob3B0aW9ucy5kaWdpdHMpIHtcbiAgICBwYXJhbXMucHVzaChgJmRpZ2l0cz0ke29wdGlvbnMuZGlnaXRzfWApO1xuICB9XG4gIGlmIChvcHRpb25zLmFsZ29yaXRobSkge1xuICAgIHBhcmFtcy5wdXNoKGAmYWxnb3JpdGhtPSR7b3B0aW9ucy5hbGdvcml0aG0udG9VcHBlckNhc2UoKX1gKTtcbiAgfVxuICBpZiAob3B0aW9ucy5pc3N1ZXIpIHtcbiAgICBwYXJhbXMucHVzaChgJmlzc3Vlcj0ke2VuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmlzc3Vlcil9YCk7XG4gIH1cbiAgcmV0dXJuIHRtcGwucmVwbGFjZSgne2xhYmVsUHJlZml4fScsIGVuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmlzc3VlciB8fCBvcHRpb25zLmFjY291bnROYW1lKSkucmVwbGFjZSgne2FjY291bnROYW1lfScsIGVuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmFjY291bnROYW1lKSkucmVwbGFjZSgne3NlY3JldH0nLCBvcHRpb25zLnNlY3JldCkucmVwbGFjZSgne3F1ZXJ5fScsIHBhcmFtcy5qb2luKCcnKSk7XG59XG5jbGFzcyBPVFAge1xuICBjb25zdHJ1Y3RvcihkZWZhdWx0T3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5fZGVmYXVsdE9wdGlvbnMgPSBPYmplY3QuZnJlZXplKHsgLi4uZGVmYXVsdE9wdGlvbnNcbiAgICB9KTtcbiAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4gIH1cbiAgY3JlYXRlKGRlZmF1bHRPcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IE9UUChkZWZhdWx0T3B0aW9ucyk7XG4gIH1cbiAgY2xvbmUoZGVmYXVsdE9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5jcmVhdGUoeyAuLi50aGlzLl9kZWZhdWx0T3B0aW9ucyxcbiAgICAgIC4uLmRlZmF1bHRPcHRpb25zXG4gICAgfSk7XG4gICAgaW5zdGFuY2Uub3B0aW9ucyA9IHRoaXMuX29wdGlvbnM7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9XG4gIGdldCBvcHRpb25zKCkge1xuICAgIHJldHVybiBPYmplY3QuZnJlZXplKHsgLi4udGhpcy5fZGVmYXVsdE9wdGlvbnMsXG4gICAgICAuLi50aGlzLl9vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgc2V0IG9wdGlvbnMob3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuZnJlZXplKHsgLi4udGhpcy5fb3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgfVxuICBhbGxPcHRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XG4gIH1cbiAgcmVzZXRPcHRpb25zKCkge1xuICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBob3RwT3B0aW9uc1ZhbGlkYXRvcihvcHRpb25zKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5jcmVhdGVEaWdlc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBvcHRpb25zLmNyZWF0ZURpZ2VzdCB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5jcmVhdGVIbWFjS2V5ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3Rpbmcgb3B0aW9ucy5jcmVhdGVIbWFjS2V5IHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmRpZ2l0cyAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBvcHRpb25zLmRpZ2l0cyB0byBiZSBhIG51bWJlci4nKTtcbiAgfVxuICBpZiAoIW9wdGlvbnMuYWxnb3JpdGhtIHx8IEhBU0hfQUxHT1JJVEhNUy5pbmRleE9mKG9wdGlvbnMuYWxnb3JpdGhtKSA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGluZyBvcHRpb25zLmFsZ29yaXRobSB0byBiZSBvbmUgb2YgJHtIQVNIX0FMR09SSVRITVMuam9pbignLCAnKX0uIFJlY2VpdmVkICR7b3B0aW9ucy5hbGdvcml0aG19LmApO1xuICB9XG4gIGlmICghb3B0aW9ucy5lbmNvZGluZyB8fCBLRVlfRU5DT0RJTkdTLmluZGV4T2Yob3B0aW9ucy5lbmNvZGluZykgPCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3Rpbmcgb3B0aW9ucy5lbmNvZGluZyB0byBiZSBvbmUgb2YgJHtLRVlfRU5DT0RJTkdTLmpvaW4oJywgJyl9LiBSZWNlaXZlZCAke29wdGlvbnMuZW5jb2Rpbmd9LmApO1xuICB9XG59XG5jb25zdCBob3RwQ3JlYXRlSG1hY0tleSA9IChhbGdvcml0aG0sIHNlY3JldCwgZW5jb2RpbmcpID0+IHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKHNlY3JldCwgZW5jb2RpbmcpLnRvU3RyaW5nKCdoZXgnKTtcbn07XG5mdW5jdGlvbiBob3RwRGVmYXVsdE9wdGlvbnMoKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgYWxnb3JpdGhtOiBleHBvcnRzLkhhc2hBbGdvcml0aG1zLlNIQTEsXG4gICAgY3JlYXRlSG1hY0tleTogaG90cENyZWF0ZUhtYWNLZXksXG4gICAgY3JlYXRlRGlnZXN0OiBjcmVhdGVEaWdlc3RQbGFjZWhvbGRlcixcbiAgICBkaWdpdHM6IDYsXG4gICAgZW5jb2Rpbmc6IGV4cG9ydHMuS2V5RW5jb2RpbmdzLkFTQ0lJXG4gIH07XG4gIHJldHVybiBvcHRpb25zO1xufVxuZnVuY3Rpb24gaG90cE9wdGlvbnMob3B0KSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7IC4uLmhvdHBEZWZhdWx0T3B0aW9ucygpLFxuICAgIC4uLm9wdFxuICB9O1xuICBob3RwT3B0aW9uc1ZhbGlkYXRvcihvcHRpb25zKTtcbiAgcmV0dXJuIE9iamVjdC5mcmVlemUob3B0aW9ucyk7XG59XG5mdW5jdGlvbiBob3RwQ291bnRlcihjb3VudGVyKSB7XG4gIGNvbnN0IGhleENvdW50ZXIgPSBjb3VudGVyLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIHBhZFN0YXJ0KGhleENvdW50ZXIsIDE2LCAnMCcpO1xufVxuZnVuY3Rpb24gaG90cERpZ2VzdFRvVG9rZW4oaGV4RGlnZXN0LCBkaWdpdHMpIHtcbiAgY29uc3QgZGlnZXN0ID0gQnVmZmVyLmZyb20oaGV4RGlnZXN0LCAnaGV4Jyk7XG4gIGNvbnN0IG9mZnNldCA9IGRpZ2VzdFtkaWdlc3QubGVuZ3RoIC0gMV0gJiAweGY7XG4gIGNvbnN0IGJpbmFyeSA9IChkaWdlc3Rbb2Zmc2V0XSAmIDB4N2YpIDw8IDI0IHwgKGRpZ2VzdFtvZmZzZXQgKyAxXSAmIDB4ZmYpIDw8IDE2IHwgKGRpZ2VzdFtvZmZzZXQgKyAyXSAmIDB4ZmYpIDw8IDggfCBkaWdlc3Rbb2Zmc2V0ICsgM10gJiAweGZmO1xuICBjb25zdCB0b2tlbiA9IGJpbmFyeSAlIE1hdGgucG93KDEwLCBkaWdpdHMpO1xuICByZXR1cm4gcGFkU3RhcnQoU3RyaW5nKHRva2VuKSwgZGlnaXRzLCAnMCcpO1xufVxuZnVuY3Rpb24gaG90cERpZ2VzdChzZWNyZXQsIGNvdW50ZXIsIG9wdGlvbnMpIHtcbiAgY29uc3QgaGV4Q291bnRlciA9IGhvdHBDb3VudGVyKGNvdW50ZXIpO1xuICBjb25zdCBobWFjS2V5ID0gb3B0aW9ucy5jcmVhdGVIbWFjS2V5KG9wdGlvbnMuYWxnb3JpdGhtLCBzZWNyZXQsIG9wdGlvbnMuZW5jb2RpbmcpO1xuICByZXR1cm4gb3B0aW9ucy5jcmVhdGVEaWdlc3Qob3B0aW9ucy5hbGdvcml0aG0sIGhtYWNLZXksIGhleENvdW50ZXIpO1xufVxuZnVuY3Rpb24gaG90cFRva2VuKHNlY3JldCwgY291bnRlciwgb3B0aW9ucykge1xuICBjb25zdCBoZXhEaWdlc3QgPSBvcHRpb25zLmRpZ2VzdCB8fCBob3RwRGlnZXN0KHNlY3JldCwgY291bnRlciwgb3B0aW9ucyk7XG4gIHJldHVybiBob3RwRGlnZXN0VG9Ub2tlbihoZXhEaWdlc3QsIG9wdGlvbnMuZGlnaXRzKTtcbn1cbmZ1bmN0aW9uIGhvdHBDaGVjayh0b2tlbiwgc2VjcmV0LCBjb3VudGVyLCBvcHRpb25zKSB7XG4gIGlmICghaXNUb2tlblZhbGlkKHRva2VuKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBzeXN0ZW1Ub2tlbiA9IGhvdHBUb2tlbihzZWNyZXQsIGNvdW50ZXIsIG9wdGlvbnMpO1xuICByZXR1cm4gdG9rZW4gPT09IHN5c3RlbVRva2VuO1xufVxuZnVuY3Rpb24gaG90cEtleXVyaShhY2NvdW50TmFtZSwgaXNzdWVyLCBzZWNyZXQsIGNvdW50ZXIsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGtleXVyaSh7XG4gICAgYWxnb3JpdGhtOiBvcHRpb25zLmFsZ29yaXRobSxcbiAgICBkaWdpdHM6IG9wdGlvbnMuZGlnaXRzLFxuICAgIHR5cGU6IGV4cG9ydHMuU3RyYXRlZ3kuSE9UUCxcbiAgICBhY2NvdW50TmFtZSxcbiAgICBjb3VudGVyLFxuICAgIGlzc3VlcixcbiAgICBzZWNyZXRcbiAgfSk7XG59XG5jbGFzcyBIT1RQIGV4dGVuZHMgT1RQIHtcbiAgY3JlYXRlKGRlZmF1bHRPcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IEhPVFAoZGVmYXVsdE9wdGlvbnMpO1xuICB9XG4gIGFsbE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIGhvdHBPcHRpb25zKHRoaXMub3B0aW9ucyk7XG4gIH1cbiAgZ2VuZXJhdGUoc2VjcmV0LCBjb3VudGVyKSB7XG4gICAgcmV0dXJuIGhvdHBUb2tlbihzZWNyZXQsIGNvdW50ZXIsIHRoaXMuYWxsT3B0aW9ucygpKTtcbiAgfVxuICBjaGVjayh0b2tlbiwgc2VjcmV0LCBjb3VudGVyKSB7XG4gICAgcmV0dXJuIGhvdHBDaGVjayh0b2tlbiwgc2VjcmV0LCBjb3VudGVyLCB0aGlzLmFsbE9wdGlvbnMoKSk7XG4gIH1cbiAgdmVyaWZ5KG9wdHMpIHtcbiAgICBpZiAodHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBhcmd1bWVudCAwIG9mIHZlcmlmeSB0byBiZSBhbiBvYmplY3QnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2hlY2sob3B0cy50b2tlbiwgb3B0cy5zZWNyZXQsIG9wdHMuY291bnRlcik7XG4gIH1cbiAga2V5dXJpKGFjY291bnROYW1lLCBpc3N1ZXIsIHNlY3JldCwgY291bnRlcikge1xuICAgIHJldHVybiBob3RwS2V5dXJpKGFjY291bnROYW1lLCBpc3N1ZXIsIHNlY3JldCwgY291bnRlciwgdGhpcy5hbGxPcHRpb25zKCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlV2luZG93Qm91bmRzKHdpbikge1xuICBpZiAodHlwZW9mIHdpbiA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gW01hdGguYWJzKHdpbiksIE1hdGguYWJzKHdpbildO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHdpbikpIHtcbiAgICBjb25zdCBbcGFzdCwgZnV0dXJlXSA9IHdpbjtcbiAgICBpZiAodHlwZW9mIHBhc3QgPT09ICdudW1iZXInICYmIHR5cGVvZiBmdXR1cmUgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gW01hdGguYWJzKHBhc3QpLCBNYXRoLmFicyhmdXR1cmUpXTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3Rpbmcgb3B0aW9ucy53aW5kb3cgdG8gYmUgYW4gbnVtYmVyIG9yIFtudW1iZXIsIG51bWJlcl0uJyk7XG59XG5mdW5jdGlvbiB0b3RwT3B0aW9uc1ZhbGlkYXRvcihvcHRpb25zKSB7XG4gIGhvdHBPcHRpb25zVmFsaWRhdG9yKG9wdGlvbnMpO1xuICBwYXJzZVdpbmRvd0JvdW5kcyhvcHRpb25zLndpbmRvdyk7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5lcG9jaCAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBvcHRpb25zLmVwb2NoIHRvIGJlIGEgbnVtYmVyLicpO1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5zdGVwICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0aW5nIG9wdGlvbnMuc3RlcCB0byBiZSBhIG51bWJlci4nKTtcbiAgfVxufVxuY29uc3QgdG90cFBhZFNlY3JldCA9IChzZWNyZXQsIGVuY29kaW5nLCBtaW5MZW5ndGgpID0+IHtcbiAgY29uc3QgY3VycmVudExlbmd0aCA9IHNlY3JldC5sZW5ndGg7XG4gIGNvbnN0IGhleFNlY3JldCA9IEJ1ZmZlci5mcm9tKHNlY3JldCwgZW5jb2RpbmcpLnRvU3RyaW5nKCdoZXgnKTtcbiAgaWYgKGN1cnJlbnRMZW5ndGggPCBtaW5MZW5ndGgpIHtcbiAgICBjb25zdCBuZXdTZWNyZXQgPSBuZXcgQXJyYXkobWluTGVuZ3RoIC0gY3VycmVudExlbmd0aCArIDEpLmpvaW4oaGV4U2VjcmV0KTtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20obmV3U2VjcmV0LCAnaGV4Jykuc2xpY2UoMCwgbWluTGVuZ3RoKS50b1N0cmluZygnaGV4Jyk7XG4gIH1cbiAgcmV0dXJuIGhleFNlY3JldDtcbn07XG5jb25zdCB0b3RwQ3JlYXRlSG1hY0tleSA9IChhbGdvcml0aG0sIHNlY3JldCwgZW5jb2RpbmcpID0+IHtcbiAgc3dpdGNoIChhbGdvcml0aG0pIHtcbiAgICBjYXNlIGV4cG9ydHMuSGFzaEFsZ29yaXRobXMuU0hBMTpcbiAgICAgIHJldHVybiB0b3RwUGFkU2VjcmV0KHNlY3JldCwgZW5jb2RpbmcsIDIwKTtcbiAgICBjYXNlIGV4cG9ydHMuSGFzaEFsZ29yaXRobXMuU0hBMjU2OlxuICAgICAgcmV0dXJuIHRvdHBQYWRTZWNyZXQoc2VjcmV0LCBlbmNvZGluZywgMzIpO1xuICAgIGNhc2UgZXhwb3J0cy5IYXNoQWxnb3JpdGhtcy5TSEE1MTI6XG4gICAgICByZXR1cm4gdG90cFBhZFNlY3JldChzZWNyZXQsIGVuY29kaW5nLCA2NCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0aW5nIGFsZ29yaXRobSB0byBiZSBvbmUgb2YgJHtIQVNIX0FMR09SSVRITVMuam9pbignLCAnKX0uIFJlY2VpdmVkICR7YWxnb3JpdGhtfS5gKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHRvdHBEZWZhdWx0T3B0aW9ucygpIHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBhbGdvcml0aG06IGV4cG9ydHMuSGFzaEFsZ29yaXRobXMuU0hBMSxcbiAgICBjcmVhdGVEaWdlc3Q6IGNyZWF0ZURpZ2VzdFBsYWNlaG9sZGVyLFxuICAgIGNyZWF0ZUhtYWNLZXk6IHRvdHBDcmVhdGVIbWFjS2V5LFxuICAgIGRpZ2l0czogNixcbiAgICBlbmNvZGluZzogZXhwb3J0cy5LZXlFbmNvZGluZ3MuQVNDSUksXG4gICAgZXBvY2g6IERhdGUubm93KCksXG4gICAgc3RlcDogMzAsXG4gICAgd2luZG93OiAwXG4gIH07XG4gIHJldHVybiBvcHRpb25zO1xufVxuZnVuY3Rpb24gdG90cE9wdGlvbnMob3B0KSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7IC4uLnRvdHBEZWZhdWx0T3B0aW9ucygpLFxuICAgIC4uLm9wdFxuICB9O1xuICB0b3RwT3B0aW9uc1ZhbGlkYXRvcihvcHRpb25zKTtcbiAgcmV0dXJuIE9iamVjdC5mcmVlemUob3B0aW9ucyk7XG59XG5mdW5jdGlvbiB0b3RwQ291bnRlcihlcG9jaCwgc3RlcCkge1xuICByZXR1cm4gTWF0aC5mbG9vcihlcG9jaCAvIHN0ZXAgLyAxMDAwKTtcbn1cbmZ1bmN0aW9uIHRvdHBUb2tlbihzZWNyZXQsIG9wdGlvbnMpIHtcbiAgY29uc3QgY291bnRlciA9IHRvdHBDb3VudGVyKG9wdGlvbnMuZXBvY2gsIG9wdGlvbnMuc3RlcCk7XG4gIHJldHVybiBob3RwVG9rZW4oc2VjcmV0LCBjb3VudGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHRvdHBFcG9jaHNJbldpbmRvdyhlcG9jaCwgZGlyZWN0aW9uLCBkZWx0YVBlckVwb2NoLCBudW1PZkVwb2NoZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGlmIChudW1PZkVwb2NoZXMgPT09IDApIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IG51bU9mRXBvY2hlczsgaSsrKSB7XG4gICAgY29uc3QgZGVsdGEgPSBkaXJlY3Rpb24gKiBpICogZGVsdGFQZXJFcG9jaDtcbiAgICByZXN1bHQucHVzaChlcG9jaCArIGRlbHRhKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG90cEVwb2NoQXZhaWxhYmxlKGVwb2NoLCBzdGVwLCB3aW4pIHtcbiAgY29uc3QgYm91bmRzID0gcGFyc2VXaW5kb3dCb3VuZHMod2luKTtcbiAgY29uc3QgZGVsdGEgPSBzdGVwICogMTAwMDtcbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50OiBlcG9jaCxcbiAgICBwYXN0OiB0b3RwRXBvY2hzSW5XaW5kb3coZXBvY2gsIC0xLCBkZWx0YSwgYm91bmRzWzBdKSxcbiAgICBmdXR1cmU6IHRvdHBFcG9jaHNJbldpbmRvdyhlcG9jaCwgMSwgZGVsdGEsIGJvdW5kc1sxXSlcbiAgfTtcbn1cbmZ1bmN0aW9uIHRvdHBDaGVjayh0b2tlbiwgc2VjcmV0LCBvcHRpb25zKSB7XG4gIGlmICghaXNUb2tlblZhbGlkKHRva2VuKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBzeXN0ZW1Ub2tlbiA9IHRvdHBUb2tlbihzZWNyZXQsIG9wdGlvbnMpO1xuICByZXR1cm4gdG9rZW4gPT09IHN5c3RlbVRva2VuO1xufVxuZnVuY3Rpb24gdG90cENoZWNrQnlFcG9jaChlcG9jaHMsIHRva2VuLCBzZWNyZXQsIG9wdGlvbnMpIHtcbiAgbGV0IHBvc2l0aW9uID0gbnVsbDtcbiAgZXBvY2hzLnNvbWUoKGVwb2NoLCBpZHgpID0+IHtcbiAgICBpZiAodG90cENoZWNrKHRva2VuLCBzZWNyZXQsIHsgLi4ub3B0aW9ucyxcbiAgICAgIGVwb2NoXG4gICAgfSkpIHtcbiAgICAgIHBvc2l0aW9uID0gaWR4ICsgMTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuICByZXR1cm4gcG9zaXRpb247XG59XG5mdW5jdGlvbiB0b3RwQ2hlY2tXaXRoV2luZG93KHRva2VuLCBzZWNyZXQsIG9wdGlvbnMpIHtcbiAgaWYgKHRvdHBDaGVjayh0b2tlbiwgc2VjcmV0LCBvcHRpb25zKSkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIGNvbnN0IGVwb2NocyA9IHRvdHBFcG9jaEF2YWlsYWJsZShvcHRpb25zLmVwb2NoLCBvcHRpb25zLnN0ZXAsIG9wdGlvbnMud2luZG93KTtcbiAgY29uc3QgYmFja3dhcmQgPSB0b3RwQ2hlY2tCeUVwb2NoKGVwb2Nocy5wYXN0LCB0b2tlbiwgc2VjcmV0LCBvcHRpb25zKTtcbiAgaWYgKGJhY2t3YXJkICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIGJhY2t3YXJkICogLTE7XG4gIH1cbiAgcmV0dXJuIHRvdHBDaGVja0J5RXBvY2goZXBvY2hzLmZ1dHVyZSwgdG9rZW4sIHNlY3JldCwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiB0b3RwVGltZVVzZWQoZXBvY2gsIHN0ZXApIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoZXBvY2ggLyAxMDAwKSAlIHN0ZXA7XG59XG5mdW5jdGlvbiB0b3RwVGltZVJlbWFpbmluZyhlcG9jaCwgc3RlcCkge1xuICByZXR1cm4gc3RlcCAtIHRvdHBUaW1lVXNlZChlcG9jaCwgc3RlcCk7XG59XG5mdW5jdGlvbiB0b3RwS2V5dXJpKGFjY291bnROYW1lLCBpc3N1ZXIsIHNlY3JldCwgb3B0aW9ucykge1xuICByZXR1cm4ga2V5dXJpKHtcbiAgICBhbGdvcml0aG06IG9wdGlvbnMuYWxnb3JpdGhtLFxuICAgIGRpZ2l0czogb3B0aW9ucy5kaWdpdHMsXG4gICAgc3RlcDogb3B0aW9ucy5zdGVwLFxuICAgIHR5cGU6IGV4cG9ydHMuU3RyYXRlZ3kuVE9UUCxcbiAgICBhY2NvdW50TmFtZSxcbiAgICBpc3N1ZXIsXG4gICAgc2VjcmV0XG4gIH0pO1xufVxuY2xhc3MgVE9UUCBleHRlbmRzIEhPVFAge1xuICBjcmVhdGUoZGVmYXVsdE9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgVE9UUChkZWZhdWx0T3B0aW9ucyk7XG4gIH1cbiAgYWxsT3B0aW9ucygpIHtcbiAgICByZXR1cm4gdG90cE9wdGlvbnModGhpcy5vcHRpb25zKTtcbiAgfVxuICBnZW5lcmF0ZShzZWNyZXQpIHtcbiAgICByZXR1cm4gdG90cFRva2VuKHNlY3JldCwgdGhpcy5hbGxPcHRpb25zKCkpO1xuICB9XG4gIGNoZWNrRGVsdGEodG9rZW4sIHNlY3JldCkge1xuICAgIHJldHVybiB0b3RwQ2hlY2tXaXRoV2luZG93KHRva2VuLCBzZWNyZXQsIHRoaXMuYWxsT3B0aW9ucygpKTtcbiAgfVxuICBjaGVjayh0b2tlbiwgc2VjcmV0KSB7XG4gICAgY29uc3QgZGVsdGEgPSB0aGlzLmNoZWNrRGVsdGEodG9rZW4sIHNlY3JldCk7XG4gICAgcmV0dXJuIHR5cGVvZiBkZWx0YSA9PT0gJ251bWJlcic7XG4gIH1cbiAgdmVyaWZ5KG9wdHMpIHtcbiAgICBpZiAodHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBhcmd1bWVudCAwIG9mIHZlcmlmeSB0byBiZSBhbiBvYmplY3QnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2hlY2sob3B0cy50b2tlbiwgb3B0cy5zZWNyZXQpO1xuICB9XG4gIHRpbWVSZW1haW5pbmcoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuYWxsT3B0aW9ucygpO1xuICAgIHJldHVybiB0b3RwVGltZVJlbWFpbmluZyhvcHRpb25zLmVwb2NoLCBvcHRpb25zLnN0ZXApO1xuICB9XG4gIHRpbWVVc2VkKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmFsbE9wdGlvbnMoKTtcbiAgICByZXR1cm4gdG90cFRpbWVVc2VkKG9wdGlvbnMuZXBvY2gsIG9wdGlvbnMuc3RlcCk7XG4gIH1cbiAga2V5dXJpKGFjY291bnROYW1lLCBpc3N1ZXIsIHNlY3JldCkge1xuICAgIHJldHVybiB0b3RwS2V5dXJpKGFjY291bnROYW1lLCBpc3N1ZXIsIHNlY3JldCwgdGhpcy5hbGxPcHRpb25zKCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGF1dGhlbnRpY2F0b3JPcHRpb25WYWxpZGF0b3Iob3B0aW9ucykge1xuICB0b3RwT3B0aW9uc1ZhbGlkYXRvcihvcHRpb25zKTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmtleURlY29kZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBvcHRpb25zLmtleURlY29kZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuICBpZiAob3B0aW9ucy5rZXlFbmNvZGVyICYmIHR5cGVvZiBvcHRpb25zLmtleUVuY29kZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBvcHRpb25zLmtleUVuY29kZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxufVxuZnVuY3Rpb24gYXV0aGVudGljYXRvckRlZmF1bHRPcHRpb25zKCkge1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGFsZ29yaXRobTogZXhwb3J0cy5IYXNoQWxnb3JpdGhtcy5TSEExLFxuICAgIGNyZWF0ZURpZ2VzdDogY3JlYXRlRGlnZXN0UGxhY2Vob2xkZXIsXG4gICAgY3JlYXRlSG1hY0tleTogdG90cENyZWF0ZUhtYWNLZXksXG4gICAgZGlnaXRzOiA2LFxuICAgIGVuY29kaW5nOiBleHBvcnRzLktleUVuY29kaW5ncy5IRVgsXG4gICAgZXBvY2g6IERhdGUubm93KCksXG4gICAgc3RlcDogMzAsXG4gICAgd2luZG93OiAwXG4gIH07XG4gIHJldHVybiBvcHRpb25zO1xufVxuZnVuY3Rpb24gYXV0aGVudGljYXRvck9wdGlvbnMob3B0KSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7IC4uLmF1dGhlbnRpY2F0b3JEZWZhdWx0T3B0aW9ucygpLFxuICAgIC4uLm9wdFxuICB9O1xuICBhdXRoZW50aWNhdG9yT3B0aW9uVmFsaWRhdG9yKG9wdGlvbnMpO1xuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGF1dGhlbnRpY2F0b3JFbmNvZGVyKHNlY3JldCwgb3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucy5rZXlFbmNvZGVyKHNlY3JldCwgb3B0aW9ucy5lbmNvZGluZyk7XG59XG5mdW5jdGlvbiBhdXRoZW50aWNhdG9yRGVjb2RlcihzZWNyZXQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMua2V5RGVjb2RlcihzZWNyZXQsIG9wdGlvbnMuZW5jb2RpbmcpO1xufVxuZnVuY3Rpb24gYXV0aGVudGljYXRvckdlbmVyYXRlU2VjcmV0KG51bWJlck9mQnl0ZXMsIG9wdGlvbnMpIHtcbiAgY29uc3Qga2V5ID0gb3B0aW9ucy5jcmVhdGVSYW5kb21CeXRlcyhudW1iZXJPZkJ5dGVzLCBvcHRpb25zLmVuY29kaW5nKTtcbiAgcmV0dXJuIGF1dGhlbnRpY2F0b3JFbmNvZGVyKGtleSwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBhdXRoZW50aWNhdG9yVG9rZW4oc2VjcmV0LCBvcHRpb25zKSB7XG4gIHJldHVybiB0b3RwVG9rZW4oYXV0aGVudGljYXRvckRlY29kZXIoc2VjcmV0LCBvcHRpb25zKSwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBhdXRoZW50aWNhdG9yQ2hlY2tXaXRoV2luZG93KHRva2VuLCBzZWNyZXQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRvdHBDaGVja1dpdGhXaW5kb3codG9rZW4sIGF1dGhlbnRpY2F0b3JEZWNvZGVyKHNlY3JldCwgb3B0aW9ucyksIG9wdGlvbnMpO1xufVxuY2xhc3MgQXV0aGVudGljYXRvciBleHRlbmRzIFRPVFAge1xuICBjcmVhdGUoZGVmYXVsdE9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgQXV0aGVudGljYXRvcihkZWZhdWx0T3B0aW9ucyk7XG4gIH1cbiAgYWxsT3B0aW9ucygpIHtcbiAgICByZXR1cm4gYXV0aGVudGljYXRvck9wdGlvbnModGhpcy5vcHRpb25zKTtcbiAgfVxuICBnZW5lcmF0ZShzZWNyZXQpIHtcbiAgICByZXR1cm4gYXV0aGVudGljYXRvclRva2VuKHNlY3JldCwgdGhpcy5hbGxPcHRpb25zKCkpO1xuICB9XG4gIGNoZWNrRGVsdGEodG9rZW4sIHNlY3JldCkge1xuICAgIHJldHVybiBhdXRoZW50aWNhdG9yQ2hlY2tXaXRoV2luZG93KHRva2VuLCBzZWNyZXQsIHRoaXMuYWxsT3B0aW9ucygpKTtcbiAgfVxuICBlbmNvZGUoc2VjcmV0KSB7XG4gICAgcmV0dXJuIGF1dGhlbnRpY2F0b3JFbmNvZGVyKHNlY3JldCwgdGhpcy5hbGxPcHRpb25zKCkpO1xuICB9XG4gIGRlY29kZShzZWNyZXQpIHtcbiAgICByZXR1cm4gYXV0aGVudGljYXRvckRlY29kZXIoc2VjcmV0LCB0aGlzLmFsbE9wdGlvbnMoKSk7XG4gIH1cbiAgZ2VuZXJhdGVTZWNyZXQobnVtYmVyT2ZCeXRlcyA9IDEwKSB7XG4gICAgcmV0dXJuIGF1dGhlbnRpY2F0b3JHZW5lcmF0ZVNlY3JldChudW1iZXJPZkJ5dGVzLCB0aGlzLmFsbE9wdGlvbnMoKSk7XG4gIH1cbn1cblxuZXhwb3J0cy5BdXRoZW50aWNhdG9yID0gQXV0aGVudGljYXRvcjtcbmV4cG9ydHMuSEFTSF9BTEdPUklUSE1TID0gSEFTSF9BTEdPUklUSE1TO1xuZXhwb3J0cy5IT1RQID0gSE9UUDtcbmV4cG9ydHMuS0VZX0VOQ09ESU5HUyA9IEtFWV9FTkNPRElOR1M7XG5leHBvcnRzLk9UUCA9IE9UUDtcbmV4cG9ydHMuU1RSQVRFR1kgPSBTVFJBVEVHWTtcbmV4cG9ydHMuVE9UUCA9IFRPVFA7XG5leHBvcnRzLmF1dGhlbnRpY2F0b3JDaGVja1dpdGhXaW5kb3cgPSBhdXRoZW50aWNhdG9yQ2hlY2tXaXRoV2luZG93O1xuZXhwb3J0cy5hdXRoZW50aWNhdG9yRGVjb2RlciA9IGF1dGhlbnRpY2F0b3JEZWNvZGVyO1xuZXhwb3J0cy5hdXRoZW50aWNhdG9yRGVmYXVsdE9wdGlvbnMgPSBhdXRoZW50aWNhdG9yRGVmYXVsdE9wdGlvbnM7XG5leHBvcnRzLmF1dGhlbnRpY2F0b3JFbmNvZGVyID0gYXV0aGVudGljYXRvckVuY29kZXI7XG5leHBvcnRzLmF1dGhlbnRpY2F0b3JHZW5lcmF0ZVNlY3JldCA9IGF1dGhlbnRpY2F0b3JHZW5lcmF0ZVNlY3JldDtcbmV4cG9ydHMuYXV0aGVudGljYXRvck9wdGlvblZhbGlkYXRvciA9IGF1dGhlbnRpY2F0b3JPcHRpb25WYWxpZGF0b3I7XG5leHBvcnRzLmF1dGhlbnRpY2F0b3JPcHRpb25zID0gYXV0aGVudGljYXRvck9wdGlvbnM7XG5leHBvcnRzLmF1dGhlbnRpY2F0b3JUb2tlbiA9IGF1dGhlbnRpY2F0b3JUb2tlbjtcbmV4cG9ydHMuY3JlYXRlRGlnZXN0UGxhY2Vob2xkZXIgPSBjcmVhdGVEaWdlc3RQbGFjZWhvbGRlcjtcbmV4cG9ydHMuaG90cENoZWNrID0gaG90cENoZWNrO1xuZXhwb3J0cy5ob3RwQ291bnRlciA9IGhvdHBDb3VudGVyO1xuZXhwb3J0cy5ob3RwQ3JlYXRlSG1hY0tleSA9IGhvdHBDcmVhdGVIbWFjS2V5O1xuZXhwb3J0cy5ob3RwRGVmYXVsdE9wdGlvbnMgPSBob3RwRGVmYXVsdE9wdGlvbnM7XG5leHBvcnRzLmhvdHBEaWdlc3RUb1Rva2VuID0gaG90cERpZ2VzdFRvVG9rZW47XG5leHBvcnRzLmhvdHBLZXl1cmkgPSBob3RwS2V5dXJpO1xuZXhwb3J0cy5ob3RwT3B0aW9ucyA9IGhvdHBPcHRpb25zO1xuZXhwb3J0cy5ob3RwT3B0aW9uc1ZhbGlkYXRvciA9IGhvdHBPcHRpb25zVmFsaWRhdG9yO1xuZXhwb3J0cy5ob3RwVG9rZW4gPSBob3RwVG9rZW47XG5leHBvcnRzLmlzVG9rZW5WYWxpZCA9IGlzVG9rZW5WYWxpZDtcbmV4cG9ydHMua2V5dXJpID0ga2V5dXJpO1xuZXhwb3J0cy5vYmplY3RWYWx1ZXMgPSBvYmplY3RWYWx1ZXM7XG5leHBvcnRzLnBhZFN0YXJ0ID0gcGFkU3RhcnQ7XG5leHBvcnRzLnRvdHBDaGVjayA9IHRvdHBDaGVjaztcbmV4cG9ydHMudG90cENoZWNrQnlFcG9jaCA9IHRvdHBDaGVja0J5RXBvY2g7XG5leHBvcnRzLnRvdHBDaGVja1dpdGhXaW5kb3cgPSB0b3RwQ2hlY2tXaXRoV2luZG93O1xuZXhwb3J0cy50b3RwQ291bnRlciA9IHRvdHBDb3VudGVyO1xuZXhwb3J0cy50b3RwQ3JlYXRlSG1hY0tleSA9IHRvdHBDcmVhdGVIbWFjS2V5O1xuZXhwb3J0cy50b3RwRGVmYXVsdE9wdGlvbnMgPSB0b3RwRGVmYXVsdE9wdGlvbnM7XG5leHBvcnRzLnRvdHBFcG9jaEF2YWlsYWJsZSA9IHRvdHBFcG9jaEF2YWlsYWJsZTtcbmV4cG9ydHMudG90cEtleXVyaSA9IHRvdHBLZXl1cmk7XG5leHBvcnRzLnRvdHBPcHRpb25zID0gdG90cE9wdGlvbnM7XG5leHBvcnRzLnRvdHBPcHRpb25zVmFsaWRhdG9yID0gdG90cE9wdGlvbnNWYWxpZGF0b3I7XG5leHBvcnRzLnRvdHBQYWRTZWNyZXQgPSB0b3RwUGFkU2VjcmV0O1xuZXhwb3J0cy50b3RwVGltZVJlbWFpbmluZyA9IHRvdHBUaW1lUmVtYWluaW5nO1xuZXhwb3J0cy50b3RwVGltZVVzZWQgPSB0b3RwVGltZVVzZWQ7XG5leHBvcnRzLnRvdHBUb2tlbiA9IHRvdHBUb2tlbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@otplib/core/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@otplib/plugin-crypto/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/@otplib/plugin-crypto/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/**\n * @otplib/plugin-crypto\n *\n * @author Gerald Yeo <contact@fusedthought.com>\n * @version: 12.0.1\n * @license: MIT\n **/\n\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar crypto = _interopDefault(__webpack_require__(/*! crypto */ \"crypto\"));\n\nconst createDigest = (algorithm, hmacKey, counter) => {\n  const hmac = crypto.createHmac(algorithm, Buffer.from(hmacKey, 'hex'));\n  const digest = hmac.update(Buffer.from(counter, 'hex')).digest();\n  return digest.toString('hex');\n};\nconst createRandomBytes = (size, encoding) => {\n  return crypto.randomBytes(size).toString(encoding);\n};\n\nexports.createDigest = createDigest;\nexports.createRandomBytes = createRandomBytes;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQG90cGxpYi9wbHVnaW4tY3J5cHRvL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RCxnQ0FBZ0M7O0FBRWhDLDZCQUE2QixtQkFBTyxDQUFDLHNCQUFROztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQix5QkFBeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmdlbGJyb2tpbmctbGl2ZS1kYXRhLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9Ab3RwbGliL3BsdWdpbi1jcnlwdG8vaW5kZXguanM/YmE2NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBvdHBsaWIvcGx1Z2luLWNyeXB0b1xuICpcbiAqIEBhdXRob3IgR2VyYWxkIFllbyA8Y29udGFjdEBmdXNlZHRob3VnaHQuY29tPlxuICogQHZlcnNpb246IDEyLjAuMVxuICogQGxpY2Vuc2U6IE1JVFxuICoqL1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGV4KSB7IHJldHVybiAoZXggJiYgKHR5cGVvZiBleCA9PT0gJ29iamVjdCcpICYmICdkZWZhdWx0JyBpbiBleCkgPyBleFsnZGVmYXVsdCddIDogZXg7IH1cblxudmFyIGNyeXB0byA9IF9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdjcnlwdG8nKSk7XG5cbmNvbnN0IGNyZWF0ZURpZ2VzdCA9IChhbGdvcml0aG0sIGhtYWNLZXksIGNvdW50ZXIpID0+IHtcbiAgY29uc3QgaG1hYyA9IGNyeXB0by5jcmVhdGVIbWFjKGFsZ29yaXRobSwgQnVmZmVyLmZyb20oaG1hY0tleSwgJ2hleCcpKTtcbiAgY29uc3QgZGlnZXN0ID0gaG1hYy51cGRhdGUoQnVmZmVyLmZyb20oY291bnRlciwgJ2hleCcpKS5kaWdlc3QoKTtcbiAgcmV0dXJuIGRpZ2VzdC50b1N0cmluZygnaGV4Jyk7XG59O1xuY29uc3QgY3JlYXRlUmFuZG9tQnl0ZXMgPSAoc2l6ZSwgZW5jb2RpbmcpID0+IHtcbiAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcyhzaXplKS50b1N0cmluZyhlbmNvZGluZyk7XG59O1xuXG5leHBvcnRzLmNyZWF0ZURpZ2VzdCA9IGNyZWF0ZURpZ2VzdDtcbmV4cG9ydHMuY3JlYXRlUmFuZG9tQnl0ZXMgPSBjcmVhdGVSYW5kb21CeXRlcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@otplib/plugin-crypto/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@otplib/plugin-thirty-two/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@otplib/plugin-thirty-two/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/**\n * @otplib/plugin-thirty-two\n *\n * @author Gerald Yeo <contact@fusedthought.com>\n * @version: 12.0.1\n * @license: MIT\n **/\n\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar thirtyTwo = _interopDefault(__webpack_require__(/*! thirty-two */ \"(rsc)/./node_modules/thirty-two/lib/thirty-two/index.js\"));\n\nconst keyDecoder = (encodedSecret, encoding) => {\n  return thirtyTwo.decode(encodedSecret).toString(encoding);\n};\nconst keyEncoder = (secret, encoding) => {\n  return thirtyTwo.encode(Buffer.from(secret, encoding).toString('ascii')).toString().replace(/=/g, '');\n};\n\nexports.keyDecoder = keyDecoder;\nexports.keyEncoder = keyEncoder;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQG90cGxpYi9wbHVnaW4tdGhpcnR5LXR3by9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUViLDhDQUE2QyxFQUFFLGFBQWEsRUFBQzs7QUFFN0QsZ0NBQWdDOztBQUVoQyxnQ0FBZ0MsbUJBQU8sQ0FBQywyRUFBWTs7QUFFcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQjtBQUNsQixrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmdlbGJyb2tpbmctbGl2ZS1kYXRhLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9Ab3RwbGliL3BsdWdpbi10aGlydHktdHdvL2luZGV4LmpzPzc3NjciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAb3RwbGliL3BsdWdpbi10aGlydHktdHdvXG4gKlxuICogQGF1dGhvciBHZXJhbGQgWWVvIDxjb250YWN0QGZ1c2VkdGhvdWdodC5jb20+XG4gKiBAdmVyc2lvbjogMTIuMC4xXG4gKiBAbGljZW5zZTogTUlUXG4gKiovXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCAoZXgpIHsgcmV0dXJuIChleCAmJiAodHlwZW9mIGV4ID09PSAnb2JqZWN0JykgJiYgJ2RlZmF1bHQnIGluIGV4KSA/IGV4WydkZWZhdWx0J10gOiBleDsgfVxuXG52YXIgdGhpcnR5VHdvID0gX2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ3RoaXJ0eS10d28nKSk7XG5cbmNvbnN0IGtleURlY29kZXIgPSAoZW5jb2RlZFNlY3JldCwgZW5jb2RpbmcpID0+IHtcbiAgcmV0dXJuIHRoaXJ0eVR3by5kZWNvZGUoZW5jb2RlZFNlY3JldCkudG9TdHJpbmcoZW5jb2RpbmcpO1xufTtcbmNvbnN0IGtleUVuY29kZXIgPSAoc2VjcmV0LCBlbmNvZGluZykgPT4ge1xuICByZXR1cm4gdGhpcnR5VHdvLmVuY29kZShCdWZmZXIuZnJvbShzZWNyZXQsIGVuY29kaW5nKS50b1N0cmluZygnYXNjaWknKSkudG9TdHJpbmcoKS5yZXBsYWNlKC89L2csICcnKTtcbn07XG5cbmV4cG9ydHMua2V5RGVjb2RlciA9IGtleURlY29kZXI7XG5leHBvcnRzLmtleUVuY29kZXIgPSBrZXlFbmNvZGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@otplib/plugin-thirty-two/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@otplib/preset-default/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@otplib/preset-default/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/**\n * @otplib/preset-default\n *\n * @author Gerald Yeo <contact@fusedthought.com>\n * @version: 12.0.1\n * @license: MIT\n **/\n\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar pluginCrypto = __webpack_require__(/*! @otplib/plugin-crypto */ \"(rsc)/./node_modules/@otplib/plugin-crypto/index.js\");\nvar pluginThirtyTwo = __webpack_require__(/*! @otplib/plugin-thirty-two */ \"(rsc)/./node_modules/@otplib/plugin-thirty-two/index.js\");\nvar core = __webpack_require__(/*! @otplib/core */ \"(rsc)/./node_modules/@otplib/core/index.js\");\n\nconst hotp = new core.HOTP({\n  createDigest: pluginCrypto.createDigest\n});\nconst totp = new core.TOTP({\n  createDigest: pluginCrypto.createDigest\n});\nconst authenticator = new core.Authenticator({\n  createDigest: pluginCrypto.createDigest,\n  createRandomBytes: pluginCrypto.createRandomBytes,\n  keyDecoder: pluginThirtyTwo.keyDecoder,\n  keyEncoder: pluginThirtyTwo.keyEncoder\n});\n\nexports.authenticator = authenticator;\nexports.hotp = hotp;\nexports.totp = totp;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQG90cGxpYi9wcmVzZXQtZGVmYXVsdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUViLDhDQUE2QyxFQUFFLGFBQWEsRUFBQzs7QUFFN0QsbUJBQW1CLG1CQUFPLENBQUMsa0ZBQXVCO0FBQ2xELHNCQUFzQixtQkFBTyxDQUFDLDBGQUEyQjtBQUN6RCxXQUFXLG1CQUFPLENBQUMsZ0VBQWM7O0FBRWpDO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxxQkFBcUI7QUFDckIsWUFBWTtBQUNaLFlBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmdlbGJyb2tpbmctbGl2ZS1kYXRhLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9Ab3RwbGliL3ByZXNldC1kZWZhdWx0L2luZGV4LmpzP2U5M2UiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAb3RwbGliL3ByZXNldC1kZWZhdWx0XG4gKlxuICogQGF1dGhvciBHZXJhbGQgWWVvIDxjb250YWN0QGZ1c2VkdGhvdWdodC5jb20+XG4gKiBAdmVyc2lvbjogMTIuMC4xXG4gKiBAbGljZW5zZTogTUlUXG4gKiovXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBwbHVnaW5DcnlwdG8gPSByZXF1aXJlKCdAb3RwbGliL3BsdWdpbi1jcnlwdG8nKTtcbnZhciBwbHVnaW5UaGlydHlUd28gPSByZXF1aXJlKCdAb3RwbGliL3BsdWdpbi10aGlydHktdHdvJyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJ0BvdHBsaWIvY29yZScpO1xuXG5jb25zdCBob3RwID0gbmV3IGNvcmUuSE9UUCh7XG4gIGNyZWF0ZURpZ2VzdDogcGx1Z2luQ3J5cHRvLmNyZWF0ZURpZ2VzdFxufSk7XG5jb25zdCB0b3RwID0gbmV3IGNvcmUuVE9UUCh7XG4gIGNyZWF0ZURpZ2VzdDogcGx1Z2luQ3J5cHRvLmNyZWF0ZURpZ2VzdFxufSk7XG5jb25zdCBhdXRoZW50aWNhdG9yID0gbmV3IGNvcmUuQXV0aGVudGljYXRvcih7XG4gIGNyZWF0ZURpZ2VzdDogcGx1Z2luQ3J5cHRvLmNyZWF0ZURpZ2VzdCxcbiAgY3JlYXRlUmFuZG9tQnl0ZXM6IHBsdWdpbkNyeXB0by5jcmVhdGVSYW5kb21CeXRlcyxcbiAga2V5RGVjb2RlcjogcGx1Z2luVGhpcnR5VHdvLmtleURlY29kZXIsXG4gIGtleUVuY29kZXI6IHBsdWdpblRoaXJ0eVR3by5rZXlFbmNvZGVyXG59KTtcblxuZXhwb3J0cy5hdXRoZW50aWNhdG9yID0gYXV0aGVudGljYXRvcjtcbmV4cG9ydHMuaG90cCA9IGhvdHA7XG5leHBvcnRzLnRvdHAgPSB0b3RwO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@otplib/preset-default/index.js\n");

/***/ })

};
;